{"ast":null,"code":"var _jsxFileName = \"/home/asus/React_Shop_App/src/components/search/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { useDebounce } from \"../../hooks/debounce\";\nimport { useGetProductByIdQuery, useGetProductsAllQuery } from \"../../redux/products/products.api\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/context\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setSearchFilterProducts, toggleSearchForm } from \"../../redux/products/products.slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function Search() {\n  _s();\n\n  const filtersProducts = [];\n  const [search, setSearch] = useState('');\n  const [dropdown, setDropdown] = useState(false);\n  const contextId = useContext(Context);\n  const debounced = useDebounce(search);\n  const dispatch = useDispatch();\n  const searchField = useSelector(state => state.product.search);\n  const {\n    refetch\n  } = useGetProductByIdQuery(contextId.id);\n  const {\n    data\n  } = useGetProductsAllQuery(debounced, {\n    skip: debounced.length < 2 // refetchOnFocus: true\n\n  });\n\n  const clickHandler = productId => {\n    setDropdown(false);\n    dispatch(toggleSearchForm(false));\n    contextId.id = productId;\n    refetch();\n  };\n\n  const toggleForm = () => dispatch(toggleSearchForm(false));\n\n  useEffect(() => {\n    setDropdown(debounced.length >= 3 && (data === null || data === void 0 ? void 0 : data.length) > 0);\n  }, [debounced, data]);\n\n  const products = () => {\n    if (debounced.length >= 2 && (data === null || data === void 0 ? void 0 : data.length) > 0) {\n      return data === null || data === void 0 ? void 0 : data.filter(product => {\n        if (product.title.toLowerCase().includes(search.toLowerCase())) {\n          filtersProducts.push(product);\n          return product;\n        }\n      }).map((product, index) => {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: `/products/${product.id}`,\n          onClick: () => clickHandler(product.id),\n          className: \"text-black flex items-center max-h-[80px] mb-4 border-b pb-2 last:border-0 last:mb-0 hover:opacity-50 transition\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-[50px] mr-4 max-h-[75px]\",\n            src: product.image,\n            alt: product.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-base\",\n              children: product.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-md font-medium\",\n              children: [\"$ \", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 21\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 24\n        }, this);\n      });\n    }\n  };\n\n  const submitSearchForm = event => {\n    event.preventDefault();\n\n    if (search !== '') {\n      dispatch(setSearchFilterProducts(filtersProducts));\n      dispatch(toggleSearchForm(false));\n    }\n\n    setDropdown(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [searchField && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute left-0 right-0 top-0 bottom-0 w-full h-[100vh] z-10 bg-gray-300/50\",\n      onClick: toggleForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: `${searchField ? 'absolute top-3 left-0 mx-auto right-0 w-[90%] bg-white z-20 rounded shadow-md flex items-center justify-between' : 'bg-white rounded rounded-r-md hidden items-center relative w-[390px] md:flex md:justify-between'}`,\n      onSubmit: submitSearchForm,\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faSearch,\n        className: \"text-black pr-1 pl-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search products...\",\n        className: \"px-1 text-lg text-black outline-0 h-[35px] w-full focus:outline-none\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"bg-black h-[35px] px-3 rounded-r hover:bg-gray-700 transition cursor-pointer\",\n        type: \"submit\",\n        value: \"Find\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), dropdown && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-0 top-[36px] right-0 bg-white p-2 border border-black rounded max-h-[500px] overflow-y-auto search-box\",\n        children: products()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Search, \"UdGljJwBYIRZXx8FbXnxj9GS1B4=\", false, function () {\n  return [useDebounce, useDispatch, useSelector, useGetProductByIdQuery, useGetProductsAllQuery];\n});\n\n_c = Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useContext","useEffect","useState","FontAwesomeIcon","faSearch","useDebounce","useGetProductByIdQuery","useGetProductsAllQuery","Link","Context","useDispatch","useSelector","setSearchFilterProducts","toggleSearchForm","Search","filtersProducts","search","setSearch","dropdown","setDropdown","contextId","debounced","dispatch","searchField","state","product","refetch","id","data","skip","length","clickHandler","productId","toggleForm","products","filter","title","toLowerCase","includes","push","map","index","image","price","submitSearchForm","event","preventDefault","e","target","value"],"sources":["/home/asus/React_Shop_App/src/components/search/Search.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from \"react\"\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faSearch} from \"@fortawesome/free-solid-svg-icons\"\nimport {useDebounce} from \"../../hooks/debounce\"\nimport {useGetProductByIdQuery, useGetProductsAllQuery} from \"../../redux/products/products.api\"\nimport {Link} from \"react-router-dom\"\nimport {Context} from \"../../context/context\"\nimport {useDispatch, useSelector} from \"react-redux\"\nimport {setSearchFilterProducts, toggleSearchForm} from \"../../redux/products/products.slice\"\n\nexport function Search() {\n    const filtersProducts = []\n    const [search, setSearch] = useState('')\n    const [dropdown, setDropdown] = useState(false)\n\n    const contextId = useContext(Context)\n    const debounced = useDebounce(search)\n    const dispatch = useDispatch()\n\n    const searchField = useSelector(state => state.product.search)\n\n    const {refetch} = useGetProductByIdQuery(contextId.id)\n\n    const {data} = useGetProductsAllQuery(debounced, {\n        skip: debounced.length < 2,\n        // refetchOnFocus: true\n    })\n\n    const clickHandler = (productId) => {\n        setDropdown(false)\n        dispatch(toggleSearchForm(false))\n        contextId.id = productId\n        refetch()\n    }\n\n    const toggleForm = () => dispatch(toggleSearchForm(false))\n\n    useEffect(() => {\n        setDropdown(debounced.length >= 3 && data?.length > 0)\n    }, [debounced, data])\n\n    const products = () => {\n        if (debounced.length >= 2 && data?.length > 0) {\n            return data?.filter(product => {\n                if (product.title.toLowerCase().includes(search.toLowerCase())) {\n                    filtersProducts.push(product)\n                    return product\n                }\n            }).map((product,index) => {\n                return <Link to={`/products/${product.id}`} onClick={() => clickHandler(product.id)}\n                             className='text-black flex items-center max-h-[80px] mb-4 border-b pb-2 last:border-0 last:mb-0 hover:opacity-50 transition'\n                             key={index}>\n                    <img className='w-[50px] mr-4 max-h-[75px]' src={product.image} alt={product.title}/>\n                    <div>\n                        <p className='text-base'>{product.title}</p>\n                        <p className='text-md font-medium'>$ {product.price}</p>\n                    </div>\n                </Link>\n            })\n        }\n    }\n\n    const submitSearchForm = event => {\n        event.preventDefault()\n        if (search !== '') {\n            dispatch(setSearchFilterProducts(filtersProducts))\n            dispatch(toggleSearchForm(false))\n        }\n        setDropdown(false)\n    }\n\n    return (\n        <>\n            { searchField && <div className='absolute left-0 right-0 top-0 bottom-0 w-full h-[100vh] z-10 bg-gray-300/50' onClick={toggleForm}/> }\n\n            <form\n                className={`${searchField ? 'absolute top-3 left-0 mx-auto right-0 w-[90%] bg-white z-20 rounded shadow-md flex items-center justify-between' : 'bg-white rounded rounded-r-md hidden items-center relative w-[390px] md:flex md:justify-between'}`}\n                onSubmit={submitSearchForm}\n            >\n                <FontAwesomeIcon icon={faSearch} className='text-black pr-1 pl-2'/>\n                <input\n                    type=\"text\"\n                    placeholder='Search products...'\n                    className='px-1 text-lg text-black outline-0 h-[35px] w-full focus:outline-none'\n                    value={search}\n                    onChange={e => setSearch(e.target.value)}\n                />\n                <input\n                    className='bg-black h-[35px] px-3 rounded-r hover:bg-gray-700 transition cursor-pointer'\n                    type='submit'\n                    value='Find'\n                />\n\n                {dropdown &&\n                    <div className='absolute left-0 top-[36px] right-0 bg-white p-2 border border-black rounded max-h-[500px] overflow-y-auto search-box'>\n                        { products() }\n                    </div>\n                }\n\n            </form>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}