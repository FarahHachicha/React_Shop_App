{"ast":null,"code":"import React,{useContext}from\"react\";import{Link}from\"react-router-dom\";import{useGetProductByCategoryQuery}from\"../../redux/products/products.api\";import{faCartShopping,faCheck,faStar}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{Loader}from\"../loader/Loader\";import{useDispatch,useSelector}from\"react-redux\";import{addProductToCart}from\"../../redux/products/products.slice\";import{Context}from\"../../context/context\";import{Colors}from\"../optionsProduct/Colors\";import{Sizes}from\"../optionsProduct/Sizes\";import{Brands}from\"../optionsProduct/Brands\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function ProductDetailItem(_ref){var product=_ref.product,refetch=_ref.refetch,status=_ref.status;var contextId=useContext(Context);var _useSelector=useSelector(function(state){return state.product;}),cart=_useSelector.cart;var _useGetProductByCateg=useGetProductByCategoryQuery(product.category),data=_useGetProductByCateg.data,isLoading=_useGetProductByCateg.isLoading,error=_useGetProductByCateg.error;var filterProductFooter=data===null||data===void 0?void 0:data.filter(function(item){return item.id!==product.id;});var isCart=!!cart.find(function(el){return el.id===product.id;});var dispatch=useDispatch();var addProduct=function addProduct(){return dispatch(addProductToCart(product));};var countStar=function countStar(rating){var arr=[];var ratingRound=Math.round(rating);for(var i=0;i<ratingRound;i++){arr.push(i);}return arr.map(function(star){return/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"text-yellow-500\",icon:faStar},star);});};var optionsProduct=function optionsProduct(category){if(category==='men\\'s clothing'||category==='women\\'s clothing')return/*#__PURE__*/_jsx(Colors,{});if(category==='jewelery')return/*#__PURE__*/_jsx(Sizes,{});if(category==='electronics')return/*#__PURE__*/_jsx(Brands,{});};var clickHandler=function clickHandler(productId){contextId.id=productId;refetch();if(status===\"fulfilled\"){var body=document.querySelector('body').getBoundingClientRect().top+window.scrollY;window.scroll({top:body,behavior:'smooth'});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-6\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"capitalize text-gray-500 mb-6 text-sm font-semibold sm:text-base\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"transition hover:border-b-2 border-b-gray-500\",children:\"Home\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2\",children:\"\\\\\"}),product.category,/*#__PURE__*/_jsx(\"span\",{className:\"pl-2\",children:\"\\\\\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center lg:flex lg:flex-row lg:justify-between lg:items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full shadow-lg rounded-md flex justify-center items-center lg:w-2/4 sm:w-3/4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-2/4 lg:w-3/4\",src:product.image,alt:product.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full pl-0 sm:w-3/4 lg:w-2/4 lg:pl-[30px]\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-xl mt-5 lg:mt-0 md:text-2xl\",children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"my-4 text-xl sm:text-2xl\",children:[\"$\",product.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mr-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 text-base font-semibold\",children:product.rating.rate}),countStar(product.rating.rate)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"cursor-pointer text-indigo-600 text-base font-medium hover:text-indigo-500 transition\",children:[product.rating.count,\" reviews\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base mt-4 sm:text-lg\",children:product.description}),/*#__PURE__*/_jsx(\"div\",{className:\"my-4\",children:optionsProduct(product.category)}),/*#__PURE__*/_jsx(\"button\",{onClick:addProduct,disabled:isCart,className:\"w-full bg-black mt-8 text-md rounded-md text-white transition px-[80px] py-[15px] sm:text-lg md:w-fit \".concat(isCart?'border px-[40px] py-[10px]':'hover:bg-gray-800'),children:isCart?/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"text-[25px] sm:text-[30px]\",icon:faCheck}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" Add to bag\",/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCartShopping})})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-[100px]\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-medium w-fit border-b-2 border-b-gray-500 mx-auto lg:mx-0\",children:\"You may also be interested\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start mt-8 overflow-x-auto lg:overflow-x-hidden \".concat((filterProductFooter===null||filterProductFooter===void 0?void 0:filterProductFooter.length)>3?'lg:justify-center':'sm:justify-center'),children:[error&&/*#__PURE__*/_jsx(\"div\",{children:error.error}),isLoading&&/*#__PURE__*/_jsx(Loader,{}),filterProductFooter===null||filterProductFooter===void 0?void 0:filterProductFooter.map(function(product){return/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(product.id),onClick:function onClick(){return clickHandler(product.id);},className:\"flex flex-col justify-evenly items-center border mx-1 py-1 rounded-lg shadow-lg productItem\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-[100px]\",src:product.image,alt:product.title}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"w-[200px] text-center\",children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-center\",children:[\"$\",product.price]})]})]},product.id);})]})]})]})});}","map":{"version":3,"names":["React","useContext","Link","useGetProductByCategoryQuery","faCartShopping","faCheck","faStar","FontAwesomeIcon","Loader","useDispatch","useSelector","addProductToCart","Context","Colors","Sizes","Brands","ProductDetailItem","product","refetch","status","contextId","state","cart","category","data","isLoading","error","filterProductFooter","filter","item","id","isCart","find","el","dispatch","addProduct","countStar","rating","arr","ratingRound","Math","round","i","push","map","star","optionsProduct","clickHandler","productId","body","document","querySelector","getBoundingClientRect","top","window","scrollY","scroll","behavior","image","title","price","rate","count","description","length"],"sources":["/home/asus/React_Shop_App/src/components/product-detail-item/ProductDetailItem.js"],"sourcesContent":["import React, {useContext} from \"react\"\nimport {Link} from \"react-router-dom\"\nimport {useGetProductByCategoryQuery} from \"../../redux/products/products.api\"\nimport {faCartShopping, faCheck, faStar} from \"@fortawesome/free-solid-svg-icons\"\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {Loader} from \"../loader/Loader\"\nimport {useDispatch, useSelector} from \"react-redux\"\nimport {addProductToCart} from \"../../redux/products/products.slice\"\nimport {Context} from \"../../context/context\"\nimport {Colors} from \"../optionsProduct/Colors\"\nimport {Sizes} from \"../optionsProduct/Sizes\"\nimport {Brands} from \"../optionsProduct/Brands\"\n\nexport function ProductDetailItem({product, refetch, status}) {\n    const contextId = useContext(Context)\n    const {cart} = useSelector(state => state.product)\n\n    const {data, isLoading, error} = useGetProductByCategoryQuery(product.category)\n    const filterProductFooter = data?.filter(item => item.id !== product.id)\n\n    const isCart = !!cart.find(el => el.id === product.id)\n    const dispatch = useDispatch()\n\n    const addProduct = () => dispatch(addProductToCart(product))\n\n    const countStar = rating => {\n        const arr = []\n        const ratingRound = Math.round(rating)\n        for (let i = 0; i < ratingRound; i++) {\n            arr.push(i)\n        }\n        return arr.map(star => <FontAwesomeIcon key={star} className='text-yellow-500' icon={faStar} />)\n    }\n\n    const optionsProduct = category => {\n        if (category === 'men\\'s clothing' || category === 'women\\'s clothing') return <Colors />\n        if (category === 'jewelery') return <Sizes />\n        if (category === 'electronics') return <Brands />\n    }\n\n    const clickHandler = (productId) => {\n        contextId.id = productId\n        refetch()\n        if (status === \"fulfilled\") {\n            const body = document.querySelector('body').getBoundingClientRect().top + window.scrollY\n            window.scroll({\n                top: body,\n                behavior: 'smooth'\n            })\n        }\n    }\n\n    return (\n        <>\n            <div className='px-2 pb-6'>\n                <p className='capitalize text-gray-500 mb-6 text-sm font-semibold sm:text-base'>\n                    <Link to='/' className='transition hover:border-b-2 border-b-gray-500'>\n                        Home\n                    </Link>\n                    <span className='px-2'>\\</span>\n                    {product.category}\n                    <span className='pl-2'>\\</span>\n                </p>\n                <div className='flex flex-col justify-center items-center lg:flex lg:flex-row lg:justify-between lg:items-start'>\n                    <div className='w-full shadow-lg rounded-md flex justify-center items-center lg:w-2/4 sm:w-3/4'>\n                        <img className='w-2/4 lg:w-3/4' src={product.image} alt={product.title}/>\n                    </div>\n                    <div className='w-full pl-0 sm:w-3/4 lg:w-2/4 lg:pl-[30px]'>\n                        <div>\n                            <p className='font-medium text-xl mt-5 lg:mt-0 md:text-2xl'>{product.title}</p>\n                            <p className='my-4 text-xl sm:text-2xl'>${product.price}</p>\n                            <div className='flex justify-start'>\n                                <div className='mr-4'>\n                                    <span className='mr-2 text-base font-semibold'>{product.rating.rate}</span>\n                                    {countStar(product.rating.rate)}\n                                </div>\n                                <span className='cursor-pointer text-indigo-600 text-base font-medium hover:text-indigo-500 transition'>{product.rating.count} reviews</span>\n                            </div>\n                            <p className='text-base mt-4 sm:text-lg'>{product.description}</p>\n                            <div className='my-4'>\n                                {optionsProduct(product.category)}\n                            </div>\n                            <button\n                                onClick={addProduct}\n                                disabled={isCart}\n                                className={`w-full bg-black mt-8 text-md rounded-md text-white transition px-[80px] py-[15px] sm:text-lg md:w-fit ${isCart ? 'border px-[40px] py-[10px]' : 'hover:bg-gray-800'}`}\n                            >\n                                {\n                                    isCart\n                                        ? <FontAwesomeIcon className='text-[25px] sm:text-[30px]' icon={faCheck} />\n                                        : <> Add to bag\n                                            <span className='ml-2'><FontAwesomeIcon icon={faCartShopping} /></span>\n                                        </>\n                                }\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div className='mt-[100px]'>\n                    <p className='text-xl font-medium w-fit border-b-2 border-b-gray-500 mx-auto lg:mx-0'>You may also be interested</p>\n                    <div className={`flex justify-start mt-8 overflow-x-auto lg:overflow-x-hidden ${filterProductFooter?.length > 3 ? 'lg:justify-center' : 'sm:justify-center'}`}>\n                        {error && <div>{error.error}</div>}\n                        {isLoading && <Loader />}\n                        {\n                            filterProductFooter?.map(product => (\n                                <Link to={`/products/${product.id}`}\n                                      onClick={() => clickHandler(product.id)}\n                                      key={product.id}\n                                      className='flex flex-col justify-evenly items-center border mx-1 py-1 rounded-lg shadow-lg productItem'\n                                >\n                                    <img className='w-[100px]' src={product.image} alt={product.title}/>\n                                    <div>\n                                        <p className='w-[200px] text-center'>{product.title}</p>\n                                        <p className='font-medium text-center'>${product.price}</p>\n                                    </div>\n                                </Link>\n                            ))\n                        }\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\n"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,UAAf,KAAgC,OAAhC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,4BAAR,KAA2C,mCAA3C,CACA,OAAQC,cAAR,CAAwBC,OAAxB,CAAiCC,MAAjC,KAA8C,mCAA9C,CACA,OAAQC,eAAR,KAA8B,gCAA9B,CACA,OAAQC,MAAR,KAAqB,kBAArB,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,gBAAR,KAA+B,qCAA/B,CACA,OAAQC,OAAR,KAAsB,uBAAtB,CACA,OAAQC,MAAR,KAAqB,0BAArB,CACA,OAAQC,KAAR,KAAoB,yBAApB,CACA,OAAQC,MAAR,KAAqB,0BAArB,C,6IAEA,MAAO,SAASC,kBAAT,MAAuD,IAA3BC,QAA2B,MAA3BA,OAA2B,CAAlBC,OAAkB,MAAlBA,OAAkB,CAATC,MAAS,MAATA,MAAS,CAC1D,GAAMC,UAAS,CAAGnB,UAAU,CAACW,OAAD,CAA5B,CACA,iBAAeF,WAAW,CAAC,SAAAW,KAAK,QAAIA,MAAK,CAACJ,OAAV,EAAN,CAA1B,CAAOK,IAAP,cAAOA,IAAP,CAEA,0BAAiCnB,4BAA4B,CAACc,OAAO,CAACM,QAAT,CAA7D,CAAOC,IAAP,uBAAOA,IAAP,CAAaC,SAAb,uBAAaA,SAAb,CAAwBC,KAAxB,uBAAwBA,KAAxB,CACA,GAAMC,oBAAmB,CAAGH,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEI,MAAN,CAAa,SAAAC,IAAI,QAAIA,KAAI,CAACC,EAAL,GAAYb,OAAO,CAACa,EAAxB,EAAjB,CAA5B,CAEA,GAAMC,OAAM,CAAG,CAAC,CAACT,IAAI,CAACU,IAAL,CAAU,SAAAC,EAAE,QAAIA,GAAE,CAACH,EAAH,GAAUb,OAAO,CAACa,EAAtB,EAAZ,CAAjB,CACA,GAAMI,SAAQ,CAAGzB,WAAW,EAA5B,CAEA,GAAM0B,WAAU,CAAG,QAAbA,WAAa,SAAMD,SAAQ,CAACvB,gBAAgB,CAACM,OAAD,CAAjB,CAAd,EAAnB,CAEA,GAAMmB,UAAS,CAAG,QAAZA,UAAY,CAAAC,MAAM,CAAI,CACxB,GAAMC,IAAG,CAAG,EAAZ,CACA,GAAMC,YAAW,CAAGC,IAAI,CAACC,KAAL,CAAWJ,MAAX,CAApB,CACA,IAAK,GAAIK,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGH,WAApB,CAAiCG,CAAC,EAAlC,CAAsC,CAClCJ,GAAG,CAACK,IAAJ,CAASD,CAAT,EACH,CACD,MAAOJ,IAAG,CAACM,GAAJ,CAAQ,SAAAC,IAAI,qBAAI,KAAC,eAAD,EAA4B,SAAS,CAAC,iBAAtC,CAAwD,IAAI,CAAEvC,MAA9D,EAAsBuC,IAAtB,CAAJ,EAAZ,CAAP,CACH,CAPD,CASA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAAAvB,QAAQ,CAAI,CAC/B,GAAIA,QAAQ,GAAK,iBAAb,EAAkCA,QAAQ,GAAK,mBAAnD,CAAwE,mBAAO,KAAC,MAAD,IAAP,CACxE,GAAIA,QAAQ,GAAK,UAAjB,CAA6B,mBAAO,KAAC,KAAD,IAAP,CAC7B,GAAIA,QAAQ,GAAK,aAAjB,CAAgC,mBAAO,KAAC,MAAD,IAAP,CACnC,CAJD,CAMA,GAAMwB,aAAY,CAAG,QAAfA,aAAe,CAACC,SAAD,CAAe,CAChC5B,SAAS,CAACU,EAAV,CAAekB,SAAf,CACA9B,OAAO,GACP,GAAIC,MAAM,GAAK,WAAf,CAA4B,CACxB,GAAM8B,KAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,qBAA/B,GAAuDC,GAAvD,CAA6DC,MAAM,CAACC,OAAjF,CACAD,MAAM,CAACE,MAAP,CAAc,CACVH,GAAG,CAAEJ,IADK,CAEVQ,QAAQ,CAAE,QAFA,CAAd,EAIH,CACJ,CAVD,CAYA,mBACI,sCACI,aAAK,SAAS,CAAC,WAAf,wBACI,WAAG,SAAS,CAAC,kEAAb,wBACI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,+CAAvB,kBADJ,cAII,aAAM,SAAS,CAAC,MAAhB,gBAJJ,CAKKxC,OAAO,CAACM,QALb,cAMI,aAAM,SAAS,CAAC,MAAhB,gBANJ,GADJ,cASI,aAAK,SAAS,CAAC,iGAAf,wBACI,YAAK,SAAS,CAAC,gFAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAEN,OAAO,CAACyC,KAA7C,CAAoD,GAAG,CAAEzC,OAAO,CAAC0C,KAAjE,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,4CAAf,uBACI,oCACI,UAAG,SAAS,CAAC,8CAAb,UAA6D1C,OAAO,CAAC0C,KAArE,EADJ,cAEI,WAAG,SAAS,CAAC,0BAAb,eAA0C1C,OAAO,CAAC2C,KAAlD,GAFJ,cAGI,aAAK,SAAS,CAAC,oBAAf,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,aAAM,SAAS,CAAC,8BAAhB,UAAgD3C,OAAO,CAACoB,MAAR,CAAewB,IAA/D,EADJ,CAEKzB,SAAS,CAACnB,OAAO,CAACoB,MAAR,CAAewB,IAAhB,CAFd,GADJ,cAKI,cAAM,SAAS,CAAC,uFAAhB,WAAyG5C,OAAO,CAACoB,MAAR,CAAeyB,KAAxH,cALJ,GAHJ,cAUI,UAAG,SAAS,CAAC,2BAAb,UAA0C7C,OAAO,CAAC8C,WAAlD,EAVJ,cAWI,YAAK,SAAS,CAAC,MAAf,UACKjB,cAAc,CAAC7B,OAAO,CAACM,QAAT,CADnB,EAXJ,cAcI,eACI,OAAO,CAAEY,UADb,CAEI,QAAQ,CAAEJ,MAFd,CAGI,SAAS,iHAA2GA,MAAM,CAAG,4BAAH,CAAkC,mBAAnJ,CAHb,UAMQA,MAAM,cACA,KAAC,eAAD,EAAiB,SAAS,CAAC,4BAA3B,CAAwD,IAAI,CAAE1B,OAA9D,EADA,cAEA,sDACE,aAAM,SAAS,CAAC,MAAhB,uBAAuB,KAAC,eAAD,EAAiB,IAAI,CAAED,cAAvB,EAAvB,EADF,GARd,EAdJ,GADJ,EAJJ,GATJ,cA4CI,aAAK,SAAS,CAAC,YAAf,wBACI,UAAG,SAAS,CAAC,wEAAb,wCADJ,cAEI,aAAK,SAAS,wEAAkE,CAAAuB,mBAAmB,OAAnB,EAAAA,mBAAmB,SAAnB,QAAAA,mBAAmB,CAAEqC,MAArB,EAA8B,CAA9B,CAAkC,mBAAlC,CAAwD,mBAA1H,CAAd,WACKtC,KAAK,eAAI,qBAAMA,KAAK,CAACA,KAAZ,EADd,CAEKD,SAAS,eAAI,KAAC,MAAD,IAFlB,CAIQE,mBAJR,SAIQA,mBAJR,iBAIQA,mBAAmB,CAAEiB,GAArB,CAAyB,SAAA3B,OAAO,qBAC5B,MAAC,IAAD,EAAM,EAAE,qBAAeA,OAAO,CAACa,EAAvB,CAAR,CACM,OAAO,CAAE,yBAAMiB,aAAY,CAAC9B,OAAO,CAACa,EAAT,CAAlB,EADf,CAGM,SAAS,CAAC,6FAHhB,wBAKI,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEb,OAAO,CAACyC,KAAxC,CAA+C,GAAG,CAAEzC,OAAO,CAAC0C,KAA5D,EALJ,cAMI,oCACI,UAAG,SAAS,CAAC,uBAAb,UAAsC1C,OAAO,CAAC0C,KAA9C,EADJ,cAEI,WAAG,SAAS,CAAC,yBAAb,eAAyC1C,OAAO,CAAC2C,KAAjD,GAFJ,GANJ,GAEW3C,OAAO,CAACa,EAFnB,CAD4B,EAAhC,CAJR,GAFJ,GA5CJ,GADJ,EADJ,CAuEH"},"metadata":{},"sourceType":"module"}